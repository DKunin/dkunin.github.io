<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="List of MTG cards I am selling">
    <meta name="author" content="Dmitri Kunin">
    <title>Kunin's MTG list</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.2.4/milligram.css">
    <style>
      * {
        font-family: Roboto;
      }
      table {
        width: 600px;
        margin: 0 auto;
      }
    </style>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.8/vue.min.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function () {
        var request = new XMLHttpRequest();
        request.open('GET', 'http://192.241.145.243:4444/gettable' + location.search, true);
        request.onload = function() {
          if (request.status >= 200 && request.status < 400) {
            var cards = JSON.parse(request.responseText);
            var app = new Vue({
              el: '#app',
              template: `
                <table>
                  <thead>
                    <tr>
                      <th>Image</th>
                      <th>Name</th>
                      <th>Color</th>
                      <th>Edition</th>
                      <th>Price</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="card in cards">
                      <td><img :src="card.image" width="80px"/></td>
                      <td>{{ card.name }}</td>
                      <td>{{ card.color }}</td>
                      <td>{{ card.edition }}</td>
                      <td>{{ card.price }}</td>
                    </tr>
                  </tbody>
                </table>
              `,
              data: {
                cards
              }
            })
          }
        };
        request.send();
      });
    </script>
  </body>
</html>
